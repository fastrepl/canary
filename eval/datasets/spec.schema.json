{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "properties": {
    "metrics": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "string",
        "enum": [
          "ragas_context_precision",
          "ragas_context_recall",
          "ragas_answer_relevance",
          "ragas_faithfulness"
        ]
      }
    },
    "dataset": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "question": { "type": "string" },
          "answer": { "type": "string", "maxLength": 0 },
          "contexts": {
            "type": "array",
            "items": { "type": "string" },
            "maxItems": 0
          },
          "ground_truth": { "type": "string" }
        }
      }
    }
  },
  "required": ["metrics", "dataset"],
  "allOf": [
    {
      "if": {
        "properties": {
          "metrics": { "contains": { "const": "ragas_context_precision" } }
        }
      },
      "then": {
        "properties": {
          "dataset": {
            "items": { "required": ["question", "ground_truth", "contexts"] }
          }
        }
      }
    },
    {
      "if": {
        "properties": {
          "metrics": { "contains": { "const": "ragas_context_recall" } }
        }
      },
      "then": {
        "properties": {
          "dataset": { "items": { "required": ["ground_truth", "contexts"] } }
        }
      }
    },
    {
      "if": {
        "properties": {
          "metrics": { "contains": { "const": "ragas_answer_relevance" } }
        }
      },
      "then": {
        "properties": {
          "dataset": {
            "items": { "required": ["question", "contexts", "answer"] }
          }
        }
      }
    },
    {
      "if": {
        "properties": {
          "metrics": { "contains": { "const": "ragas_faithfulness" } }
        }
      },
      "then": {
        "properties": {
          "dataset": { "items": { "required": ["answer", "contexts"] } }
        }
      }
    }
  ]
}
